{% extends "base.html" %}
{% block title %} Update Drinks {% endblock %}

{% block content %}

<div class="container py-5">
  
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold">Manage Drinks</h2>
    <a href="/staff/home-iA%23!8_92cd3vd" class="btn btn-secondary">&larr; Back to Home</a>
  </div>

  <!-- Search Bar -->
  <form method="GET" action="{{ url_for('staff_directories.update_drinks') }}" class="input-group mb-4 shadow-sm" style="max-width: 500px;">
    <input type="text" name="search" class="form-control form-control-lg rounded-start" style="font-size: 0.9rem;" placeholder="Search for a drink..." value="{{ request.args.get('search', '') }}">
  </form>

  <div class="row row-cols-1 row-cols-md-3 g-4">
    {% for product in products %}
    <div class="col" style="margin-bottom: 12px;">
      <form method="POST" action="{{ url_for('staff_directories.update_drink', product_id=product.id) }}" class="card shadow-sm h-100 border-0">
        <img 
          src="{{ url_for('static', filename='images/drink_images/' + product.name|lower|replace(' ', '_') + '.jpg') }}" 
          class="card-img-top object-fit-cover" 
          style="height: 250px; object-fit: contain;" 
          alt="{{ product.name }}">

        <div class="card-body">
          <form method="POST" action="{{ url_for('staff_directories.update_drinks', product_id=product.id) }}">
            <div class="mb-2">
              <label class="form-label fw-semibold">Drink Name</label>
              <input type="text" name="name" class="form-control" value="{{ product.name }}">
            </div>

            <div class="mb-2">
              <label class="form-label fw-semibold">Price ($)</label>
              <input type="number" name="price" class="form-control" step="0.01" value="{{ '%.2f'|format(product.price) }}">
            </div>

            <div class="mb-3">
              <label class="form-label fw-semibold">Stock</label>
              <input type="number" name="stock" class="form-control" value="{{ product.stock }}">
            </div>

            <div class="d-flex justify-content-between">
              <button type="submit" class="btn btn-success w-100 me-1" style="margin-right: 12px;">Update</button>
          </form>
              <form method="POST" action="{{ url_for('staff_directories.delete_drinks', product_id=product.id) }}" onsubmit="return confirm('Are you sure you want to delete this drink?')">
                <button type="submit" class="btn btn-outline-danger w-100 ms-1">Delete</button>
              </form>
            </div>
          </form>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
